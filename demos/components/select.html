<!doctype html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title></title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width">
		<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
		<link rel="stylesheet" href="../../.tmp/husky.css">
	</head>


	<style>
		.container {
			width: 800px;
			margin-left: 300px;
			margin-top: 100px;
		}
	</style>

	<body>

		<div class="grid" id="container">

			<div id="s1" class="grid-col-3"></div>

			<div id="s2" class="grid-col-3"></div>

		</div>

		<script src="../../node_modules/sinon/pkg/sinon.js"></script>
		<script src="../../bower_components/jquery/jquery.js"></script>
		<script src="../../bower_components/underscore/underscore-min.js"></script>

		<script src="../../js/husky.js"></script>
		<script src="../../js/modules/util.js"></script>

		<script type="text/javascript" src="../../js/modules/ui.select.js"></script>

		<script>
			Husky.DEBUG = true;

			var fakeServer;
			$(document).ready(function() {
				fakeServer = sinon.fakeServer.create();
				fakeServer.respondWith('GET', '/contacts', [200, { 'Content-Type': 'application/json' },
					'{"total": 3, "items": [ { "id": "1", "name": "Private" }, { "id": "2", "name": "Mobile" }, { "id": "3", "name":"Work" }] }'
				]);

				var select1 = $('#s1').huskySelect({
					selected: {id: 2},
					'data': [
						{
							id: 1,
							name: 'abc'
						},
						{
							id: 2,
							name: 'qwertz'
						},
						{
							id: 3,
							name: 'asdf'
						}
					]
				});

				var select2 = $('#s2').huskySelect({
					selected: {id: 2},
					'url': '/contacts'
				});

				select2.data('Husky.Ui.Select').on('select:loadData', function() {
					setTimeout(function() {
						fakeServer.respond();
					},1000);
				});

				fakeServer.respond();
			});


		</script>
	</body>
</html>
